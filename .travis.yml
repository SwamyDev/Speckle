sudo: required
dist: trusty
language: cpp

matrix:
  include:
    - os: linux
      compiler: clang
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-trusty-6.0
            - kalakris-cmake
          packages:
            - clang-6.0
            - libstdc++6
            -
      install:
            - wget http://www.cmake.org/files/v2.8/cmake-3.13.2.tar.gz
            - tar xf cmake-3.13.2.tar.gz
            - cd cmake-3.13.2
            - make
            - sudo make install
            - cd ..
      env:
        - MATRIX_EVAL="CC=clang-6.0 && CXX=clang++-6.0"
        - LINKER_FLAGS="-stdlib=libc++ -lc++abi"

before_install:
  - eval "${MATRIX_EVAL}"

script:
  - cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXE_LINKER_FLAGS=${LINKER_FLAGS} .
  - cmake --build . -- VERBOSE=1